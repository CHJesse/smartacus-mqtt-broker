# smartacus-mqtt-broker

## mqtt协议介绍

随着工业的快速发展，对设备进行管理和数据采集的需求也越来越高。要解决大量设备的通信问题造就了
物联网(IOT internet of Things)发展。

在这样的网络中，设备之间通过不同接口和各种协议进行彼此交互。要实现工业上的IOT的概念，我们就要了解
Iot的概念。要实现这些设备在复杂网络环境中的通信问题，就引出了很多协议，其中MQTT是最流行的一种。

MQTT（Message Queue Telemetry Transport）是一个轻量级开放的消息协议，用它进行传输，只需要很少的网络带宽即可。

### mqtt协议的特点

. 异步协议

. 压缩消息

. 可以在不稳定的网络环境中进行良好的数据传输

. 支持服务质量Quality Of Service (Qos) 

. 易于新设备的接入


###  计划功能列表
   
 -计划功能列表：
 
|预期功能|难度|功能描述                             |
|:-----   |:------|:----------------------------- |
|客户端登录session   | 中   |xxxx  |
|cleanSession   | 中   |xxxx  |
|支持遗嘱消息  | 中   |xxxx  |
|日志整合   | 中   |xxxx  |
|消息持久化   | 中   |xxxx  |
|支持十万级客户端  | 中   |xxxx  |
|PING报文实现上下线检测   | 中   |xxxx  |
|实现CONNECT报文  | 易 | xxxx|
| 实现SUBSCRIBE报文  | 易 | xxxx|
| 实现PUBLISH报文  | 难 | xxxx|
|Qos服务质量保证  | 难 | xxxx|
|发布订阅模式  | 中 | xxxx|
| 多项目自由配置 | 中 | xxxx|
| 支持消息持久化  | 易 | xxxx|


###  已实现的功能列表
|预期功能|难度|完成程度                          |
|:-----   |:------|:----------------------------- |
|PING报文实现上下线检测   | 易   |已完成  |
|实现CONNECT报文  | 易 | 已完成|
|实现CONNECTACK报文  | 易 | 已完成|
| 实现SUBSCRIBE报文  | 易 | 已完成|
| 实现SUBSCRIBEACK报文  | 易 | 已完成|
| 实现PUBLISH报文  | 难 | 已完成|
| 实现PUBLISHACK报文  | 难 | 已完成|
|支持Qos=1服务质量 | 中 | 已完成|
|支持Qos=2服务质量 | 难 | 已完成|
|发布订阅模式  | 中 | 已完成|




##  实现和设计思路


##  实现方案


## 实际完成功能

### ping功能已实现 

### connect功能已实现 

### publish消息发送和转发功能已实现(尚未考虑转发时的断连问题)

### publishAck功能已实现

### subscribe功能已实现

### subAck功能已实现

### unsub和unsubAck已实现

### Qos1级别的消息已实现

### Broker作为接收端处理Qos2级别的消息-已实现

### Broker作为发送端处理Qos2级别的消息


### Qos2级别的消息已全部实现 






